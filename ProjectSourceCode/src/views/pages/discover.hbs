{{!--
  Discover page template
  - Layout:
    - Top: Genre Chips
    - Grid Layout (Left Main / Right Sidebar):
      - Left: Recommended Songs (Scroll) & New Releases (Scroll, limited)
      - Right: Trending Hits (Vertical List)
--}}

<div class="discover-container">
  
  <!-- 
    1. Genre Selection (Full Width Top)
  -->
  <section class="content-section" style="margin-top: 0; margin-bottom: 2rem;">
    <div class="section-header-row">
      <h3>Browse by Genre</h3>
    </div>
    <div class="genre-row">
    <span class="genre-tag color-1" onclick="window.location.href='/discover?genre=pop'">Pop</span>
      <span class="genre-tag color-2" onclick="window.location.href='/discover?genre=hip-hop'">Hip-Hop</span>
      <span class="genre-tag color-3" onclick="window.location.href='/discover?genre=rock'">Rock</span>
      <span class="genre-tag color-4" onclick="window.location.href='/discover?genre=indie'">Indie</span>
      <span class="genre-tag color-5" onclick="window.location.href='/discover?genre=electronic'">Electronic</span>
      <span class="genre-tag color-6" onclick="window.location.href='/discover?genre=rnb'">R&B</span>
      <span class="genre-tag color-1" onclick="window.location.href='/discover?genre=country'">Country</span>
      <span class="genre-tag color-2" onclick="window.location.href='/discover?genre=jazz'">Jazz</span>
      <span class="genre-tag color-3" onclick="window.location.href='/discover?genre=classical'">Classical</span>
      <span class="genre-tag color-4" onclick="window.location.href='/discover?genre=metal'">Metal</span>
    </div>
  </section>

  <!-- Main Grid Layout -->
  <div class="home-grid-layout">
    
    <!-- LEFT COLUMN: Horizontal Scrollers -->
    <main class="main-content">
      
      <!-- 2. Recommended Songs (Horizontal Scroll) -->
      <section class="content-section">
        <div class="section-header-row">
            <h3>Top {{genre}} Picks for You</h3>
        </div>
        
        <div class="horizontal-scroll-container">
            {{#each songs}}
            <div onclick="window.location.href = `/my-reviews?song_id={{spotify_id}}`"class="scroll-card">
                <div class="card-image-wrapper">
                    <img src="{{lookup ../albumcovers @index}}" alt="Art">
                    <div class="play-overlay">▶</div>
                </div>
                {{> genre-song-card}}
            </div>
            {{/each}}
        </div>
      </section>

      <!-- 3. New Releases (Albums) - Limited to 5 -->
      <section class="content-section">
        <div class="section-header-row">
            <h3>New Releases</h3>
        </div>
        
        <div class="horizontal-scroll-container">
            <!-- Album 1 -->
            <div class="scroll-card">
                <div class="card-image-wrapper">
                    <img src="https://placehold.co/300x300/3b82f6/white?text=AH" alt="Art">
                </div>
                <div class="scroll-card-info">
                    <h4>After Hours</h4>
                    <p>The Weeknd</p>
                    <div class="card-footer">
                        <span class="rating-badge">★ 4.8</span>
                    </div>
                </div>
            </div>
            <!-- Album 2 -->
            <div class="scroll-card">
                <div class="card-image-wrapper">
                    <img src="https://placehold.co/300x300/ec4899/white?text=FN" alt="Art">
                </div>
                <div class="scroll-card-info">
                    <h4>Future Nostalgia</h4>
                    <p>Dua Lipa</p>
                    <div class="card-footer">
                        <span class="rating-badge">★ 4.7</span>
                    </div>
                </div>
            </div>
            <!-- Album 3 -->
            <div class="scroll-card">
                <div class="card-image-wrapper">
                    <img src="https://placehold.co/300x300/8b5cf6/white?text=SOUR" alt="Art">
                </div>
                <div class="scroll-card-info">
                    <h4>SOUR</h4>
                    <p>Olivia Rodrigo</p>
                    <div class="card-footer">
                        <span class="rating-badge">★ 4.5</span>
                    </div>
                </div>
            </div>
            <!-- Album 4 -->
            <div class="scroll-card">
                <div class="card-image-wrapper">
                    <img src="https://placehold.co/300x300/6366f1/white?text=Mid" alt="Art">
                </div>
                <div class="scroll-card-info">
                    <h4>Midnights</h4>
                    <p>Taylor Swift</p>
                    <div class="card-footer">
                        <span class="rating-badge">★ 4.6</span>
                    </div>
                </div>
            </div>
             <!-- Album 5 -->
            <div class="scroll-card">
                <div class="card-image-wrapper">
                    <img src="https://placehold.co/300x300/f43f5e/white?text=PH" alt="Art">
                </div>
                <div class="scroll-card-info">
                    <h4>Planet Her</h4>
                    <p>Doja Cat</p>
                    <div class="card-footer">
                        <span class="rating-badge">★ 4.4</span>
                    </div>
                </div>
            </div>
        </div>
      </section>

    </main>

    <!-- RIGHT COLUMN: Sidebar (Trending Hits Vertical) -->
    <aside class="sidebar-content">
      
      <!-- 4. Trending Hits / Community Highlights -->
      <section class="sidebar-widget">
        <h3>Trending Hits</h3>
        <p class="section-subtitle">Top 5 Community Favorites</p>
        
        <div class="vertical-list">
            <!-- Hit 1 -->
            <div class="list-item">
                <span class="rank-number">1</span>
                <img src="https://placehold.co/48x48/f97316/white?text=1" alt="Art">
                <div class="list-item-info">
                    <h4>Anti-Hero</h4>
                    <p>Taylor Swift</p>
                </div>
                <span class="rating-badge">★ 4.5</span>
            </div>
            <!-- Hit 2 -->
            <div class="list-item">
                <span class="rank-number">2</span>
                <img src="https://placehold.co/48x48/f97316/white?text=2" alt="Art">
                <div class="list-item-info">
                    <h4>Unholy</h4>
                    <p>Sam Smith</p>
                </div>
                <span class="rating-badge">★ 4.2</span>
            </div>
            <!-- Hit 3 -->
            <div class="list-item">
                <span class="rank-number">3</span>
                <img src="https://placehold.co/48x48/f97316/white?text=3" alt="Art">
                <div class="list-item-info">
                    <h4>Rich Flex</h4>
                    <p>Drake</p>
                </div>
                <span class="rating-badge">★ 3.8</span>
            </div>
            <!-- Hit 4 -->
            <div class="list-item">
                <span class="rank-number">4</span>
                <img src="https://placehold.co/48x48/f97316/white?text=4" alt="Art">
                <div class="list-item-info">
                    <h4>Bad Habit</h4>
                    <p>Steve Lacy</p>
                </div>
                <span class="rating-badge">★ 4.8</span>
            </div>
            <!-- Hit 5 -->
            <div class="list-item">
                <span class="rank-number">5</span>
                <img src="https://placehold.co/48x48/f97316/white?text=5" alt="Art">
                <div class="list-item-info">
                    <h4>Golden Hour</h4>
                    <p>JVKE</p>
                </div>
                <span class="rating-badge">★ 4.4</span>
            </div>
        </div>
      </section>

    </aside>

  </div>
</div>